{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useAnimatedProps;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _AnimatedProps = _interopRequireDefault(require(\"./nodes/AnimatedProps\"));\nvar _AnimatedEvent = require(\"./AnimatedEvent\");\nvar _useRefEffect = _interopRequireDefault(require(\"../Utilities/useRefEffect\"));\nvar _NativeAnimatedHelper = _interopRequireDefault(require(\"./NativeAnimatedHelper\"));\nvar _react = require(\"react\");\nvar _useLayoutEffect = _interopRequireDefault(require(\"../../../modules/useLayoutEffect\"));\nfunction useAnimatedProps(props) {\n  var _useReducer = (0, _react.useReducer)(function (count) {\n      return count + 1;\n    }, 0),\n    scheduleUpdate = _useReducer[1];\n  var onUpdateRef = (0, _react.useRef)(null);\n  var node = (0, _react.useMemo)(function () {\n    return new _AnimatedProps.default(props, function () {\n      return onUpdateRef.current == null ? void 0 : onUpdateRef.current();\n    });\n  }, [props]);\n  useAnimatedPropsLifecycle(node);\n  var refEffect = (0, _react.useCallback)(function (instance) {\n    node.setNativeView(instance);\n    onUpdateRef.current = function () {\n      scheduleUpdate();\n    };\n    var target = getEventTarget(instance);\n    var events = [];\n    for (var propName in props) {\n      var propValue = props[propName];\n      if (propValue instanceof _AnimatedEvent.AnimatedEvent && propValue.__isNative) {\n        propValue.__attach(target, propName);\n        events.push([propName, propValue]);\n      }\n    }\n    return function () {\n      onUpdateRef.current = null;\n      for (var _i = 0, _events = events; _i < _events.length; _i++) {\n        var _events$_i = _events[_i],\n          _propName = _events$_i[0],\n          _propValue = _events$_i[1];\n        _propValue.__detach(target, _propName);\n      }\n    };\n  }, [props, node]);\n  var callbackRef = (0, _useRefEffect.default)(refEffect);\n  return [reduceAnimatedProps(node), callbackRef];\n}\nfunction reduceAnimatedProps(node) {\n  return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, node.__getValue()), {}, {\n    collapsable: false\n  });\n}\nfunction useAnimatedPropsLifecycle(node) {\n  var prevNodeRef = (0, _react.useRef)(null);\n  var isUnmountingRef = (0, _react.useRef)(false);\n  (0, _react.useEffect)(function () {\n    _NativeAnimatedHelper.default.API.flushQueue();\n  });\n  (0, _useLayoutEffect.default)(function () {\n    isUnmountingRef.current = false;\n    return function () {\n      isUnmountingRef.current = true;\n    };\n  }, []);\n  (0, _useLayoutEffect.default)(function () {\n    node.__attach();\n    if (prevNodeRef.current != null) {\n      var prevNode = prevNodeRef.current;\n      prevNode.__restoreDefaultValues();\n      prevNode.__detach();\n      prevNodeRef.current = null;\n    }\n    return function () {\n      if (isUnmountingRef.current) {\n        node.__detach();\n      } else {\n        prevNodeRef.current = node;\n      }\n    };\n  }, [node]);\n}\nfunction getEventTarget(instance) {\n  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ? instance.getScrollableNode() : instance;\n}\nfunction isFabricInstance(instance) {\n  var _instance$getScrollRe;\n  return hasFabricHandle(instance) || hasFabricHandle(instance == null ? void 0 : instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || hasFabricHandle(instance == null ? void 0 : instance.getScrollResponder == null ? void 0 : (_instance$getScrollRe = instance.getScrollResponder()) == null ? void 0 : _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());\n}\nfunction hasFabricHandle(instance) {\n  var _instance$_internalIn, _instance$_internalIn2;\n  return (instance == null ? void 0 : (_instance$_internalIn = instance['_internalInstanceHandle']) == null ? void 0 : (_instance$_internalIn2 = _instance$_internalIn.stateNode) == null ? void 0 : _instance$_internalIn2.canonical) != null;\n}","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","useAnimatedProps","_objectSpread2","_AnimatedProps","_AnimatedEvent","_useRefEffect","_NativeAnimatedHelper","_react","_useLayoutEffect","props","_useReducer","useReducer","count","scheduleUpdate","onUpdateRef","useRef","node","useMemo","AnimatedProps","current","useAnimatedPropsLifecycle","refEffect","useCallback","instance","setNativeView","target","getEventTarget","events","propName","propValue","AnimatedEvent","__isNative","__attach","push","_i","_events","length","_events$_i","_propName","_propValue","__detach","callbackRef","useRefEffect","reduceAnimatedProps","_objectSpread","__getValue","collapsable","prevNodeRef","isUnmountingRef","useEffect","NativeAnimatedHelper","API","flushQueue","useLayoutEffect","prevNode","__restoreDefaultValues","getScrollableNode","isFabricInstance","_instance$getScrollRe","hasFabricHandle","getNativeScrollRef","getScrollResponder","_instance$_internalIn","_instance$_internalIn2","stateNode","canonical"],"sources":["C:/Users/Anirudh/New folder/amplify/frontend/node_modules/react-native-web/dist/vendor/react-native/Animated/useAnimatedProps.js"],"sourcesContent":["/**\r\n * Copyright (c) Meta Platforms, Inc. and affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n * @format\r\n */\r\n\r\n'use strict';\r\n\r\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\r\nimport AnimatedProps from './nodes/AnimatedProps';\r\nimport { AnimatedEvent } from './AnimatedEvent';\r\nimport useRefEffect from '../Utilities/useRefEffect';\r\nimport NativeAnimatedHelper from './NativeAnimatedHelper';\r\nimport { useCallback, useEffect, useMemo, useReducer, useRef } from 'react';\r\nimport useLayoutEffect from '../../../modules/useLayoutEffect';\r\nexport default function useAnimatedProps(props) {\r\n  var _useReducer = useReducer(count => count + 1, 0),\r\n    scheduleUpdate = _useReducer[1];\r\n  var onUpdateRef = useRef(null);\r\n\r\n  // TODO: Only invalidate `node` if animated props or `style` change. In the\r\n  // previous implementation, we permitted `style` to override props with the\r\n  // same name property name as styles, so we can probably continue doing that.\r\n  // The ordering of other props *should* not matter.\r\n  var node = useMemo(() => new AnimatedProps(props, () => onUpdateRef.current == null ? void 0 : onUpdateRef.current()), [props]);\r\n  useAnimatedPropsLifecycle(node);\r\n\r\n  // TODO: This \"effect\" does three things:\r\n  //\r\n  //   1) Call `setNativeView`.\r\n  //   2) Update `onUpdateRef`.\r\n  //   3) Update listeners for `AnimatedEvent` props.\r\n  //\r\n  // Ideally, each of these would be separat \"effects\" so that they are not\r\n  // unnecessarily re-run when irrelevant dependencies change. For example, we\r\n  // should be able to hoist all `AnimatedEvent` props and only do #3 if either\r\n  // the `AnimatedEvent` props change or `instance` changes.\r\n  //\r\n  // But there is no way to transparently compose three separate callback refs,\r\n  // so we just combine them all into one for now.\r\n  var refEffect = useCallback(instance => {\r\n    // NOTE: This may be called more often than necessary (e.g. when `props`\r\n    // changes), but `setNativeView` already optimizes for that.\r\n    node.setNativeView(instance);\r\n\r\n    // NOTE: This callback is only used by the JavaScript animation driver.\r\n    onUpdateRef.current = () => {\r\n      // Schedule an update for this component to update `reducedProps`,\r\n      // but do not compute it immediately. If a parent also updated, we\r\n      // need to merge those new props in before updating.\r\n      scheduleUpdate();\r\n    };\r\n    var target = getEventTarget(instance);\r\n    var events = [];\r\n    for (var propName in props) {\r\n      var propValue = props[propName];\r\n      if (propValue instanceof AnimatedEvent && propValue.__isNative) {\r\n        propValue.__attach(target, propName);\r\n        events.push([propName, propValue]);\r\n      }\r\n    }\r\n    return () => {\r\n      onUpdateRef.current = null;\r\n      for (var _i = 0, _events = events; _i < _events.length; _i++) {\r\n        var _events$_i = _events[_i],\r\n          _propName = _events$_i[0],\r\n          _propValue = _events$_i[1];\r\n        _propValue.__detach(target, _propName);\r\n      }\r\n    };\r\n  }, [props, node]);\r\n  var callbackRef = useRefEffect(refEffect);\r\n  return [reduceAnimatedProps(node), callbackRef];\r\n}\r\nfunction reduceAnimatedProps(node) {\r\n  // Force `collapsable` to be false so that the native view is not flattened.\r\n  // Flattened views cannot be accurately referenced by the native driver.\r\n  return _objectSpread(_objectSpread({}, node.__getValue()), {}, {\r\n    collapsable: false\r\n  });\r\n}\r\n\r\n/**\r\n * Manages the lifecycle of the supplied `AnimatedProps` by invoking `__attach`\r\n * and `__detach`. However, this is more complicated because `AnimatedProps`\r\n * uses reference counting to determine when to recursively detach its children\r\n * nodes. So in order to optimize this, we avoid detaching until the next attach\r\n * unless we are unmounting.\r\n */\r\nfunction useAnimatedPropsLifecycle(node) {\r\n  var prevNodeRef = useRef(null);\r\n  var isUnmountingRef = useRef(false);\r\n  useEffect(() => {\r\n    // It is ok for multiple components to call `flushQueue` because it noops\r\n    // if the queue is empty. When multiple animated components are mounted at\r\n    // the same time. Only first component flushes the queue and the others will noop.\r\n    NativeAnimatedHelper.API.flushQueue();\r\n  });\r\n  useLayoutEffect(() => {\r\n    isUnmountingRef.current = false;\r\n    return () => {\r\n      isUnmountingRef.current = true;\r\n    };\r\n  }, []);\r\n  useLayoutEffect(() => {\r\n    node.__attach();\r\n    if (prevNodeRef.current != null) {\r\n      var prevNode = prevNodeRef.current;\r\n      // TODO: Stop restoring default values (unless `reset` is called).\r\n      prevNode.__restoreDefaultValues();\r\n      prevNode.__detach();\r\n      prevNodeRef.current = null;\r\n    }\r\n    return () => {\r\n      if (isUnmountingRef.current) {\r\n        // NOTE: Do not restore default values on unmount, see D18197735.\r\n        node.__detach();\r\n      } else {\r\n        prevNodeRef.current = node;\r\n      }\r\n    };\r\n  }, [node]);\r\n}\r\nfunction getEventTarget(instance) {\r\n  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ?\r\n  // $FlowFixMe[incompatible-use] - Legacy instance assumptions.\r\n  instance.getScrollableNode() : instance;\r\n}\r\n\r\n// $FlowFixMe[unclear-type] - Legacy instance assumptions.\r\nfunction isFabricInstance(instance) {\r\n  var _instance$getScrollRe;\r\n  return hasFabricHandle(instance) ||\r\n  // Some components have a setNativeProps function but aren't a host component\r\n  // such as lists like FlatList and SectionList. These should also use\r\n  // forceUpdate in Fabric since setNativeProps doesn't exist on the underlying\r\n  // host component. This crazy hack is essentially special casing those lists and\r\n  // ScrollView itself to use forceUpdate in Fabric.\r\n  // If these components end up using forwardRef then these hacks can go away\r\n  // as instance would actually be the underlying host component and the above check\r\n  // would be sufficient.\r\n  hasFabricHandle(instance == null ? void 0 : instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || hasFabricHandle(instance == null ? void 0 : instance.getScrollResponder == null ? void 0 : (_instance$getScrollRe = instance.getScrollResponder()) == null ? void 0 : _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());\r\n}\r\n\r\n// $FlowFixMe[unclear-type] - Legacy instance assumptions.\r\nfunction hasFabricHandle(instance) {\r\n  var _instance$_internalIn, _instance$_internalIn2;\r\n  // eslint-disable-next-line dot-notation\r\n  return (instance == null ? void 0 : (_instance$_internalIn = instance['_internalInstanceHandle']) == null ? void 0 : (_instance$_internalIn2 = _instance$_internalIn.stateNode) == null ? void 0 : _instance$_internalIn2.canonical) != null;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}